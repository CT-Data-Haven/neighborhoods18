{"version":3,"sources":["img/logo.png","components/utils.js","components/Controls.jsx","components/Stage.jsx","components/DataTable.jsx","components/Profile.jsx","components/Intro.jsx","components/VizContainer.jsx","components/Legend.jsx","components/Choropleth.jsx","components/Chart.jsx","components/Download.jsx","components/Footer.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","cityDisplay","bridgeport","new_haven","hartford","stamford","getMappable","meta","filterByKey","indicators","makeTitle","lbl","first","wrds","_","fmt","fmtStr","d","undefined","format","data","key","value","displayIndicator","indicator","length","display","getNhoods","filter","level","map","getProfile","name","locData","makeChoroScale","scheme","nBrks","vals","mapValues","values","sort","brks","ckmeans","slice","scaleThreshold","domain","range","makeBarScale","lvls","uniq","reverse","grays","scaleOrdinal","makeTooltip","val","Controls","props","register","useFormContext","className","Form","Row","Col","Group","controlId","Label","Control","as","ref","onChange","cities","i","topics","Stage","type","hdr","long","short","Card","Header","Body","children","ChartStage","TableStage","style","dataBy","DataTable","cols","names","omit","colNames","col","isNumber","dataField","text","formatter","align","tblColumns","Object","keys","selectRow","mode","clickToSelect","onSelect","selected","nhood","hideSelectColumn","classes","id","bootstrap4","hover","headerClasses","bordered","keyField","columns","Profile","headerStyle","width","headerstyle","rowClasses","row","rowIndex","indexOf","Intro","Alert","variant","href","VizContainer","Tab","Container","defaultActiveKey","Nav","Item","Link","eventKey","tabs","icon","title","Content","Pane","Legend","scale","colorscale","labelFormat","label","cityStyle","fillColor","color","weight","pointerEvents","Choropleth","getStyle","feature","properties","opacity","fillOpacity","handleFeature","layer","on","featureHilite","featureUnhilite","bindTooltip","direction","offset","target","setStyle","shp","bbox","geo","b","topojson","getBounds","this","shape","layers","nhoods","objects","city","mesh","a","town","merge","geometries","Map","bounds","zoomSnap","zoomDelta","scrollWheelZoom","TileLayer","url","attribution","subdomains","minZoom","maxZoom","ext","LayerGroup","GeoJSON","onClick","onEachFeature","interactive","React","Component","lblRules","oAccess","rAccess","screenCoordinates","coords","isNaN","small","transform","x","y","dx","dy","Chart","colorNhood","accent","labels","margin","top","right","bottom","left","oAccessor","rAccessor","oPadding","oLabel","projection","responsiveWidth","fill","stroke","strokeWidth","pieceHoverAnnotation","annotations","svgAnnotationRules","customClickBehavior","baseMarkProps","transitionDuration","Download","dw","gh","Footer","Heading","year","makeDownloads","sources","source","project","Image","src","alt","App","formMethods","useForm","initValues","topic","useState","setTopic","setCity","setIndicator","setNhood","mapData","topicData","location","keyBy","makeMapData","barData","makeBarData","topicMeta","handleSubmit","formData","e","getValues","cSelect","tSelect","iSelect","prevCity","md","chart","shapes","palette","isSelect","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.9c34695b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.9144a510.png\";","import * as _ from 'lodash';\nimport { scaleOrdinal, scaleThreshold } from 'd3-scale';\nimport { ckmeans } from 'simple-statistics';\n// import wordwrap from 'wordwrapjs';\nimport { format } from 'd3-format';\nimport * as topojson from 'topojson-client';\n\nconst cityDisplay = {\n  bridgeport: 'Bridgeport',\n  new_haven: 'New Haven',\n  hartford: 'Hartford / West Hartford',\n  stamford: 'Stamford'\n};\n\nconst getMappable = (meta) => (\n  filterByKey(meta.indicators, 'type', 'm', false)\n);\n\nconst makeTitle = (lbl, first = true) => {\n  const wrds = _.replace(lbl, /_/g, ' ');\n  return first ? _.upperFirst(wrds) : _.startCase(wrds);\n};\n\nconst fmt = (fmtStr) => (\n  (d) => (d === null || d === undefined ? 'N/A' : format(fmtStr)(d))\n);\n\nconst tblColumns = (meta, names, omit = null, sort = false) => {\n  const colNames = _.difference(names, omit);\n\n  const cols = colNames.map((name) => {\n    const col = filterByKey(meta, 'indicator', name);\n    const isNumber = col !== undefined;\n\n    return {\n      dataField: (isNumber ? col.indicator : name),\n      text: (isNumber ? col.display : _.upperFirst(name)),\n      formatter: (isNumber ? fmt(col.format) : null),\n      type: (isNumber ? 'number' : 'string'),\n      align: (isNumber ? 'right' : 'left'),\n      sort\n    };\n  });\n  return cols;\n};\n\nconst compileHeader = (type) => {\n  const headers = {\n    long: '<%= lbl %> by <%= dataBy %>, <%= location %>',\n    short: '<%= lbl %>, <%= location %>'\n  };\n  return _.template(headers[type]);\n};\n\nconst filterByKey = (data, key, value, first = true) => (\n  first ? _.find(data, { [key]: value }) : _.filter(data, { [key]: value })\n);\n\nconst displayIndicator = (indicators, indicator) => {\n  const meta = filterByKey(indicators, 'indicator', indicator);\n  return _.values(meta).length ? meta.display : '';\n};\n\nconst getNhoods = (data) => (\n  _.chain(data)\n    .filter((d) => _.endsWith(d.level, 'neighborhood'))\n    .map('location')\n    .value()\n);\n\nconst getNonSelect = (data) => (\n  _.chain(data)\n    .filter((d) => !_.endsWith(d.level, 'neighborhood'))\n    .map('location')\n    .value()\n);\n\nconst getProfile = (data, name, meta) => {\n  const locData = filterByKey(data, 'location', name);\n  return locData ? meta.map((d) => ({\n    indicator: d.display,\n    value: fmt(d.format)(locData[d.indicator])\n  })) : [];\n};\n\nconst shpLayer = (shps, idx) => (\n  topojson.feature(shps, shps.objects[idx])\n);\n\nconst getBounds = (geo) => {\n  const b = topojson.bbox(geo);\n  return [[b[1], b[0]], [b[3], b[2]]];\n};\n\nconst makeGeoJson = (shp) => (\n  topojson.feature(shp, shp.objects.city)\n);\n\nconst makeGeoLayers = (shp) => {\n  const nhoods = topojson.feature(shp, shp.objects.city);\n  const mesh = topojson.mesh(shp, shp.objects.city, (a, b) => a.properties.town !== b.properties.town);\n  const merge = topojson.merge(shp, shp.objects.city.geometries);\n\n  return { nhoods, mesh, merge };\n};\n\nconst makeMapData = (topicData, indicator) => (\n  _.chain(topicData)\n    .filter((d) => _.endsWith(d.level, 'neighborhood'))\n    .map((d) => ({\n      name: d.location,\n      value: d[indicator]\n    }))\n    .keyBy('name')\n    .value()\n);\n\nconst makeBarData = (topicData, indicator) => (\n  _.sortBy(topicData, (d) => -d[indicator])\n);\n\nconst makeChoroScale = (data, scheme, nBrks) => {\n  const vals = _.chain(data)\n    .mapValues('value')\n    .values()\n    .sort()\n    .value();\n  if (!vals.length) {\n    return scaleThreshold().domain([0, 1]).range(['#ccc']);\n  } else {\n    const brks = ckmeans(vals, nBrks).map((d) => d[0]).slice(1);\n    return scaleThreshold()\n      .domain(brks)\n      .range(scheme[nBrks]);\n  }\n};\n\nconst makeBarScale = (data, scheme) => {\n  const lvls = _.chain(data)\n    .map('level')\n    .uniq()\n    .sort()\n    .reverse()\n    .value();\n  const grays = _.takeRight(scheme[lvls.length + 3], lvls.length);\n  return scaleOrdinal()\n    .domain(lvls)\n    .range(grays);\n};\n\nconst makeTooltip = (data, name, meta) => {\n  const val = data[name] ? data[name].value : null;\n  return `${ name }: ${ fmt(meta.format)(val) }`;\n};\n\nconst makeDownloads = (city, year = 2018) => ({\n  gh: `https://github.com/CT-Data-Haven/nhood_profile_data/blob/master/to_distribute/${ year }_${ city }_profile_distr.csv`,\n  dw: `https://fakedataworld.com/${ city }`\n});\n\n\n\nexport {\n  getMappable,\n  makeTitle,\n  tblColumns,\n  compileHeader,\n  displayIndicator,\n  getNhoods,\n  filterByKey,\n  getProfile,\n  getNonSelect,\n  cityDisplay,\n  shpLayer,\n  getBounds,\n  makeGeoJson,\n  makeGeoLayers,\n  makeMapData,\n  makeBarData,\n  makeChoroScale,\n  makeBarScale,\n  makeTooltip,\n  fmt,\n  makeDownloads\n};\n","import React from 'react';\nimport { Form, Col, Row } from 'react-bootstrap';\nimport { useFormContext } from 'react-hook-form';\nimport { cityDisplay } from './utils.js';\n\nimport '../styles/Controls.css';\n\nconst Controls = (props) => {\n  const { register } = useFormContext();\n\n  return (\n    <div className='Controls'>\n      <Form>\n        <Row>\n          <Col>\n            <Form.Group controlId='cSelect'>\n              <Form.Label>Select a city</Form.Label>\n              <Form.Control as='select' name='cSelect' className='custom-select' ref={ register } onChange={ props.onChange }>\n                { props.cities.map((d, i) => (\n                  <option key={ `city-${ d }` } value={ d }>{ cityDisplay[d] }</option>\n                )) }\n              </Form.Control>\n            </Form.Group>\n          </Col>\n\n          <Col>\n            <Form.Group controlId='tSelect'>\n              <Form.Label>Select a topic</Form.Label>\n              <Form.Control as='select' name='tSelect' className='custom-select' ref={ register } onChange={ props.onChange }>\n                { props.topics.map((d, i) => (\n                  <option key={ `topic-${ d }` } value={ d }>{ props.meta[d].display }</option>\n                )) }\n              </Form.Control>\n            </Form.Group>\n          </Col>\n\n          <Col>\n            <Form.Group controlId='iSelect'>\n              <Form.Label>Select an indicator</Form.Label>\n              <Form.Control as='select' name='iSelect' className='custom-select' ref={ register } onChange={ props.onChange }>\n                { props.indicators.map((d, i) => (\n                  <option key={ `indicator-${ d.indicator }` } value={ d.indicator }>{ d.display }</option>\n                )) }\n              </Form.Control>\n            </Form.Group>\n          </Col>\n        </Row>\n      </Form>\n    </div>\n  )\n};\n\nexport default Controls;\n","import React from 'react';\nimport { Card } from 'react-bootstrap';\nimport { compileHeader } from './utils.js';\n\nimport '../styles/Stage.css';\n\nconst Stage = (props) => {\n  const hdr = compileHeader(props.type)({ ...props });\n\n  return (\n    <Card>\n      <Card.Header as='h3'>\n        { hdr }\n      </Card.Header>\n      <Card.Body>\n        { props.children }\n      </Card.Body>\n    </Card>\n  )\n};\n\nconst ChartStage = (props) => (\n  <div className='Stage ChartStage'>\n    <Stage\n      // lbls={ props.lbls.map((d) => d || makeTitle(d)) }\n      type={ props.type || 'long' }\n      { ...props }\n    />\n  </div>\n);\n\n\nconst TableStage = (props) => (\n  <div className={ props.style ? 'Stage TableStage ' + props.style : 'Stage TableStage' }>\n    <Stage\n      type={ props.type || 'long' }\n      dataBy={ props.dataBy || 'neighborhood' }\n      { ...props }\n    />\n  </div>\n);\n\n\nexport { ChartStage, TableStage };\n","import React from 'react';\nimport BootstrapTable from 'react-bootstrap-table-next';\n\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport { tblColumns } from './utils.js';\n\nimport '../styles/DataTable.css';\n\nconst DataTable = (props) => {\n  // const data = React.useContext(DataContext);\n  const data = props.data;\n  // get names of last element in data, since first few (e.g. Connecticut, Hartford) won't have town but neighborhood data points will\n  const cols = tblColumns(props.meta.indicators, Object.keys(data[data.length - 1]), ['level'], true);\n  // const nonselectable = getNonSelect(data);\n  const selectRow = {\n    mode: 'radio',\n    clickToSelect: true,\n    onSelect: props.onSelect,\n    // nonSelectable: nonselectable,\n    selected: [props.nhood],\n    hideSelectColumn: true,\n    // nonSelectableClasses: 'row-no-hover',\n    classes: 'table-info'\n  };\n\n  return (\n    <div className='DataTable' id='datatable'>\n      <BootstrapTable\n        bootstrap4\n        classes='table-responsive-xl row-hover'\n        hover\n        headerClasses='thead-light'\n        bordered={ true }\n        keyField={ 'location' }\n        data={ data }\n        columns={ cols }\n        selectRow={ selectRow }\n      />\n    </div>\n  );\n\n};\n\nexport default DataTable;\n","import React from 'react';\nimport BootstrapTable from 'react-bootstrap-table-next';\n\nimport '../styles/Profile.css';\n\nconst Profile = (props) => {\n  // const data = React.useContext(DataContext);\n  const data = props.data;\n\n  const opticAdj = (row, rowIndex) => {\n    if (row.value.indexOf('%') !== -1) {\n      return 'percent';\n    }\n  };\n\n  const cols = [{\n    dataField: 'indicator',\n    text: 'Indicator',\n    headerStyle: () => ({ width: '70%' }),\n    classes: ''\n  }, {\n    dataField: 'value',\n    text: 'Value',\n    headerstyle: () => ({ width: '30%' }),\n    align: 'right',\n    classes: 'text-right'\n  }];\n\n\n  return (\n    <div className='Profile DataTable' id='profile'>\n      <BootstrapTable\n        bootstrap4\n        classes='table table-responsive-sm'\n        headerClasses='thead-light'\n        bordered={ false }\n        keyField={ 'indicator' }\n        data={ data }\n        columns={ cols }\n        rowClasses={ opticAdj }\n      />\n    </div>\n  )\n};\n\nexport default Profile;\n","import React from 'react';\nimport { Alert } from 'react-bootstrap';\n\nconst text = 'Select a topic and indicator to view either a map or a chart. Clicking a neighborhood on the map, chart, or table will bring up detailed information on that neighborhood. See all neighborhoods in the table below.';\n\nconst Intro = () => (\n\t<div className='Intro'>\n\t\t<Alert variant='light' className='border border-color-info'>\n\t\t\t<p>{ text } For more information, visit DataHaven's <a href=\"http://www.ctdatahaven.org/communities\">Communities</a> page or <a href=\"http://www.ctdatahaven.org\">main website</a>.</p>\n\t\t</Alert>\n\t</div>\n);\n\nexport default Intro;\n","import React from 'react';\nimport { Tab, Nav } from 'react-bootstrap';\n\nimport '../styles/VizContainer.css';\n\nconst VizContainer = (props) => {\n  return (\n    <div className='VizContainer'>\n      <Tab.Container defaultActiveKey='map'>\n        <Nav variant='pills'>\n          { props.children.map((d, i) => (\n            <Nav.Item key={ `${ d.key }-tab-nav` }>\n              <Nav.Link eventKey={ d.key }><span className='nav-icon'>{ props.tabs[d.key].icon }</span>  { props.tabs[d.key].title }</Nav.Link>\n            </Nav.Item>\n          )) }\n        </Nav>\n        <Tab.Content>\n          { props.children.map((d, i) => (\n            <Tab.Pane key={ `${ d.key }-tab-pane` } eventKey={ d.key }>\n              { d }\n            </Tab.Pane>\n          )) }\n        </Tab.Content>\n      </Tab.Container>\n    </div>\n  );\n};\n\nexport default VizContainer;\n","import React from 'react';\nimport { LegendThreshold } from '@vx/legend';\nimport { fmt } from './utils.js';\n\nimport '../styles/Legend.css';\n\nconst Legend = (props) => {\n  return (\n    <div className='Legend'>\n      <LegendThreshold\n        scale={ props.colorscale }\n        labelFormat={ (label) => label ? fmt(props.meta.format)(label) : '' }\n      />\n    </div>\n  )\n};\n\nexport default Legend;\n","import React from 'react';\nimport { Map, TileLayer, GeoJSON, LayerGroup } from 'react-leaflet';\nimport { getBounds, makeGeoLayers, makeTooltip } from './utils.js';\n\nimport Legend from './Legend';\nimport 'leaflet/dist/leaflet.css';\n\nimport '../styles/Chart.css';\n\n// events only get bound properly if this is a class component\n\nconst cityStyle = {\n\tfillColor: 'transparent',\n\tcolor: '#333',\n\tweight: 1.5,\n\tpointerEvents: 'none'\n};\n\nexport default class Choropleth extends React.Component {\n\n  getStyle = (feature) => {\n    const name = feature.properties.name;\n    const fillColor = this.props.data[name] ? this.props.colorscale(this.props.data[name].value) : '#ccc';\n    return {\n      fillColor,\n      color: '#555',\n      weight: 0.5,\n      opacity: 1,\n      fillOpacity: 0.75\n    };\n  };\n\n  handleFeature = (feature, layer) => {\n    let name = feature.properties.name;\n    layer\n      .on('mouseover', this.featureHilite)\n      .on('mouseout', this.featureUnhilite);\n    layer.bindTooltip(() => (\n      makeTooltip(this.props.data, name, this.props.meta)),\n      { direction: 'top', offset: [0, -20], className: 'custom-tip' }\n    );\n  };\n\n  featureHilite = ({ target }) => {\n    target.setStyle({\n      fillOpacity: 0.95,\n      weight: 1\n    });\n\n  };\n  featureUnhilite = ({ target }) => {\n    target.setStyle({\n      fillOpacity: 0.75,\n      weight: 0.5\n    });\n  };\n\n\trender() {\n\t\tconst bbox = getBounds(this.props.shape);\n\t  const layers = makeGeoLayers(this.props.shape);\n\t\treturn (\n\t    <div className='Chart Choropleth'>\n\t      <Map\n\t        key={ this.props.city }\n\t        bounds={ bbox }\n\t        zoomSnap={ 0.5 }\n\t        zoomDelta={ 0.5 }\n\t        scrollWheelZoom={ false }\n\t      >\n\t        <TileLayer\n\t          url=\"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.{ ext }\"\n\t          attribution='Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n\t          subdomains=\"abcd\"\n\t          minZoom={ 11 }\n\t          maxZoom={ 20 }\n\t          ext=\"png\"\n\t          opacity={ 0.4 }\n\t        />\n\t        <LayerGroup key={ this.props.city }>\n\t          <GeoJSON\n\t            data={ layers.nhoods }\n\t            key={ (feature) => feature.properties.name }\n\t            style={ this.getStyle }\n\t            onClick={ this.props.onClick }\n\t            onEachFeature={ this.handleFeature }\n\t          />\n\t          <GeoJSON\n\t            data={ layers.mesh }\n\t            style={ cityStyle }\n\t            interactive={ false }\n\t          />\n\t          <GeoJSON\n\t            data={ layers.merge }\n\t            style={ cityStyle }\n\t            interactive={ false }\n\t          />\n\t        </LayerGroup>\n\t      </Map>\n\t\t\t\t<Legend\n\t\t\t\t\tcolorscale={ this.props.colorscale }\n\t\t\t\t\tmeta={ this.props.meta }\n\t\t\t\t/>\n\t    </div>\n\t  );\n\t}\n};\n","import React from 'react';\nimport { ResponsiveOrdinalFrame } from 'semiotic';\nimport { fmt } from './utils.js';\n\nimport '../styles/Chart.css';\n\nconst Chart = (props) => {\n  const colorNhood = (d, nhood, scale, accent) => (\n    d[props.oAccess] === nhood ? accent : scale(d.level)\n  );\n  const format = props.meta && props.meta.format ? fmt(props.meta.format) : (d) => d;\n\n  const labels = props.data.map((d) => ({\n    label: format,\n    [props.oAccess]: d[props.oAccess],\n    [props.rAccess]: d[props.rAccess],\n    type: 'bar-label'\n  }));\n\n  return (\n    <div className='Chart'>\n      <ResponsiveOrdinalFrame\n        data={ props.data }\n        margin={ { top: 10, right: 10, bottom: 10, left: 160 } }\n        oAccessor={ props.oAccess }\n        rAccessor={ props.rAccess }\n        type='bar'\n        oPadding={ 4 }\n        oLabel={ true }\n        projection='horizontal'\n        responsiveWidth={ true }\n        style={ (d) => ({\n          fill: colorNhood(d, props.nhood, props.colorscale, props.accent),\n          stroke: 'white',\n          strokeWidth: '1px',\n          opacity: 0.8\n        }) }\n        pieceHoverAnnotation={ [{\n          type: 'highlight',\n          style: (d) => ({\n            opacity: 1.0,\n            // stroke: '#464e52'\n            stroke: '#3b6c8f'\n          })\n        }] }\n        annotations={ labels }\n        svgAnnotationRules={ (d) => lblRules(d, props.oAccess, props.rAccess, format) }\n        customClickBehavior={ props.onClick }\n        baseMarkProps={ {\n          transitionDuration: { fill: 200 }\n        } }\n      />\n    </div>\n  );\n};\n\n////// check width of bar; if under some amount, positive dx and dark label\nconst lblRules = ({ screenCoordinates, d }, oAccess, rAccess, fmt) => {\n  if (d.type === 'bar-label') {\n    const missing = isNaN(screenCoordinates[0]);\n    const coords = missing ? [0, screenCoordinates[1]] : screenCoordinates;\n    const small = coords[0] < 30;\n    return (\n      <g\n        className={ `direct-label ${ small ? 'dark' : 'light' }` }\n        key={ `lbl-${ d[oAccess] }` }\n        transform={ `translate(${ coords })` }\n      >\n        <text x={ 0 } y={ 0 } dx={ small ? '1.4em' : '-0.3em' } dy={ 3 }>{ fmt(d[rAccess]) }</text>\n      </g>\n    )\n  } else {\n    return null;\n  }\n};\n\nexport default Chart;\n","import React from 'react';\n\nconst Download = (props) => (\n  <div className='Download'>\n    View, filter, and download data on <a href={ props.dw }>data.world</a> (all users), or download from <a href={ props.gh }>GitHub</a> (advanced users).\n  </div>\n);\n\nexport default Download;\n","import React from 'react';\nimport { Image, Alert } from 'react-bootstrap';\nimport Download from './Download';\nimport { makeDownloads } from './utils.js';\n\nimport '../styles/Footer.css';\n\nimport src from '../img/logo.png';\n\nconst text = 'Source: DataHaven analysis (2019) of'\n\nconst Footer = (props) => (\n  <div className='Footer'>\n    <Alert variant='light'>\n      <Alert.Heading>Download this data</Alert.Heading>\n\n      <Download { ...makeDownloads(props.city, 2018) } />\n      {/* </Alert> */}\n      <hr />\n      {/* <Alert variant='light'> */}\n      <Alert.Heading>{ text }</Alert.Heading>\n      <ul>\n        { props.sources.map((d, i) => (\n          <li key={ `source-${ i }` }>\n            <span className='source'>{ d.source }</span> (<span>{ d.year }</span>). <a href={ d.url }>{ d.project }</a>\n          </li>\n        )) }\n      </ul>\n\n      <a href='http://www.ctdatahaven.org'><Image src={ src } id='logo' alt='DataHaven logo' /></a>\n    </Alert>\n  </div>\n);\n\nexport default Footer;\n","import React, { useState } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport { useForm, FormContext } from 'react-hook-form';\nimport { schemeGnBu as palette, schemeGreys as grays } from 'd3-scale-chromatic';\nimport { FaChartBar, FaGlobeAmericas } from 'react-icons/fa';\n\nimport Controls from './components/Controls';\nimport { ChartStage, TableStage } from './components/Stage';\nimport DataTable from './components/DataTable';\nimport Profile from './components/Profile';\nimport Intro from './components/Intro';\nimport VizContainer from './components/VizContainer';\nimport Choropleth from './components/Choropleth';\nimport Chart from './components/Chart';\nimport Footer from './components/Footer';\nimport { getMappable, makeTitle, displayIndicator, getNhoods, getProfile, makeMapData, makeBarData, makeChoroScale, makeBarScale, filterByKey } from './components/utils.js';\n\nimport './App.css';\n\nimport meta from './data/nhood_meta_2018.json';\nimport data from './data/nhood_wide_2018.json';\nimport sources from './data/sources.json';\nimport shapes from './shapes/cities_topo_list.json';\n\nconst App = () => {\n  const formMethods = useForm({\n    mode: 'onChange'\n  });\n  const topics = Object.keys(meta);\n  const cities = Object.keys(data);\n\n  const initValues = {\n    topic: topics[0],\n    city: cities[0],\n    // indicator: getMappable(meta, topics[0])[0].indicator\n    indicator: getMappable(meta[topics[0]])[0].indicator\n  };\n\n  // state\n  const [topic, setTopic] = useState(initValues.topic);\n  const [city, setCity] = useState(initValues.city);\n  const [indicator, setIndicator] = useState(initValues.indicator);\n  const [nhood, setNhood] = useState(getNhoods(data[city][topic])[0]);\n\n  // event handling\n  const onChange = (formData, e) => {\n    const { cSelect, tSelect, iSelect } = formMethods.getValues();\n\n    if (e.target.name === 'tSelect') {\n      setIndicator(getMappable(meta[tSelect])[0].indicator);\n    } else {\n      setIndicator(iSelect);\n    }\n\n    setTopic(tSelect);\n    setCity((prevCity) => cSelect);\n\n    if (e.target.name === 'cSelect') {\n      setNhood(getNhoods(data[cSelect][topic])[0]);\n    }\n  };\n\n  const onNhood = (row, isSelect, rowIndex) => {\n    setNhood(row.location);\n  };\n\n  const featureClick = ({ layer }) => {\n    setNhood(layer.feature.properties.name);\n  };\n\n  const barClick = (d) => (\n    setNhood(d.location)\n  );\n\n\n  const mapData = makeMapData(data[city][topic], indicator);\n  const barData = makeBarData(data[city][topic], indicator);\n  const topicMeta = meta[topic];\n\n  return (\n    <div className='App'>\n      <Container>\n        <header className='app-header'>\n          <h1>Connecticut Neighborhood Profiles</h1>\n        </header>\n\n        { /* INTRO ROW */ }\n        <Row>\n          <Col>\n            <Intro />\n          </Col>\n        </Row>\n\n        <Row>\n          <Col>\n            <FormContext { ...formMethods }>\n              <Controls\n                onChange={ formMethods.handleSubmit(onChange) }\n                topics={ topics }\n                indicators={ getMappable(topicMeta) }\n                cities={ cities }\n                meta={ meta }\n              />\n            </FormContext>\n          </Col>\n        </Row>\n\n        <hr />\n\n        { /* VIZ */ }\n        <Row>\n          <Col md={ 7 }>\n            <ChartStage\n              location={ makeTitle(city, false) }\n              lbl={ displayIndicator(topicMeta['indicators'], indicator) }\n              type='short'\n            >\n              <VizContainer\n                tabs={{\n                  map: { title: 'Show map', icon: <FaGlobeAmericas /> },\n                  chart: { title: 'Show chart', icon: <FaChartBar /> }\n                }}\n              >\n                <Choropleth\n                  key='map'\n                  data={ mapData }\n                  shape={ shapes[city] }\n                  city={ city }\n                  colorscale={ makeChoroScale(mapData, palette, 6) }\n                  onClick={ featureClick }\n                  meta={ filterByKey(topicMeta['indicators'], 'indicator', indicator) }\n                />\n                <Chart\n                  key='chart'\n                  data={ barData }\n                  oAccess={ 'location' }\n                  rAccess={ indicator }\n                  colorscale={ makeBarScale(barData, grays) }\n                  onClick={ barClick }\n                  meta={ filterByKey(topicMeta['indicators'], 'indicator', indicator) }\n                  accent={ palette[6][5] }\n                  nhood={ nhood }\n                />\n              </VizContainer>\n            </ChartStage>\n          </Col>\n\n          { /* PROFILE */ }\n          <Col md={ 5 }>\n            <TableStage\n              location={ nhood }\n              lbl={ topicMeta.display }\n              type='short'\n            >\n              <Profile\n                data={ getProfile(data[city][topic], nhood, topicMeta.indicators) }\n              />\n            </TableStage>\n          </Col>\n        </Row>\n\n        <hr />\n\n        { /* TABLE ROW */ }\n        <Row>\n          <Col>\n            <TableStage\n              location={ makeTitle(city, false) }\n              lbl={ topicMeta.display }\n              type='long'\n            >\n              <DataTable\n                data={ data[city][topic] }\n                meta={ topicMeta }\n                onSelect={ onNhood }\n                nhood={ nhood }\n                sort={ true }\n              />\n            </TableStage>\n          </Col>\n        </Row>\n\n        { /* FOOTER ROW */ }\n        <Row>\n          <Col>\n            <Footer sources={ sources } city={ city } />\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  )\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './styles/bootstrap.min.css';\n// import 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}